<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Client API Documentation - LocumTele Widgets</title>
    <link rel="stylesheet" href="brand/brand.css">
    <style>
        body {
            background: #f8f9fa;
        }
        .lt-code {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 6px;
            padding: 1rem;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 0.875rem;
            line-height: 1.5;
            overflow-x: auto;
            margin: 1rem 0;
        }
        .lt-code pre {
            margin: 0;
            white-space: pre-wrap;
        }
        .lt-api-section {
            margin: 2rem 0;
            padding: 1.5rem;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .lt-api-section h2 {
            color: var(--lt-blue);
            border-bottom: 2px solid var(--lt-blue);
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }
        .lt-api-section h3 {
            color: var(--lt-gray-800);
            margin-top: 1.5rem;
            margin-bottom: 0.5rem;
        }
        .lt-field-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1rem 0;
        }
        .lt-field-table th,
        .lt-field-table td {
            border: 1px solid #e9ecef;
            padding: 0.75rem;
            text-align: left;
        }
        .lt-field-table th {
            background: var(--lt-gray-50);
            font-weight: 600;
        }
        .lt-field-table .required {
            color: #dc3545;
            font-weight: 600;
        }
        .lt-field-table .optional {
            color: var(--lt-gray-600);
        }
        .lt-back-link {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            color: var(--lt-blue);
            text-decoration: none;
            margin-bottom: 2rem;
            padding: 0.5rem 1rem;
            border: 1px solid var(--lt-blue);
            border-radius: 6px;
            transition: all 0.2s;
        }
        .lt-back-link:hover {
            background: var(--lt-blue);
            color: white;
        }
    </style>
</head>
<body class="lt-branded">
    <!-- Top Banner -->
    <div class="lt-banner">
        <div class="lt-banner-content">
            <div class="lt-logo-full-banner">
                <div class="lt-logo-submark-banner"></div>
                <div class="lt-logo-text-banner">
                    <span class="lt-locum">Locum</span><span class="lt-tele">Tele</span><span class="lt-org">.org</span>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <!-- Page Header -->
        <header class="lt-page-header">
            <h1>üìö Client API Documentation</h1>
            <p>Complete API reference for integrating your custom forms with our patient screening system</p>
        </header>

        <!-- Back Link -->
        <a href="client-portal.html" class="lt-back-link">
            ‚Üê Back to Client Portal
        </a>

        <!-- Overview Section -->
        <div class="lt-section-intro">
            <div class="lt-section-robot"></div>
            <div class="lt-section-content">
                <h2>üéØ Overview</h2>
                <p>This API allows clinics to submit patient screening data from their own custom forms to our centralized processing system. The API accepts data from any screening category and processes it through a standardized webhook endpoint.</p>
            </div>
        </div>

        <div class="lt-api-section">
            <h2>Use Cases</h2>
            <ul class="lt-list">
                <li><strong>Custom Form Integration</strong>: Submit data from your own patient screening forms</li>
                <li><strong>Third-party Form Builders</strong>: Integrate with Typeform, Gravity Forms, etc.</li>
                <li><strong>Mobile Apps</strong>: Submit screening data from custom mobile applications</li>
                <li><strong>Existing Systems</strong>: Connect your current patient management system</li>
            </ul>
        </div>

        <!-- Quick Start Section -->
        <div class="lt-section-intro">
            <div class="lt-section-robot"></div>
            <div class="lt-section-content">
                <h2>üöÄ Quick Start</h2>
                <p>Get up and running with our API in minutes. Here are ready-to-use examples for the most common integration scenarios.</p>
            </div>
        </div>

        <div class="lt-api-section">
            <h2>HTML/JavaScript Form</h2>
            <p>Simple integration for custom HTML forms:</p>
            
            <div class="lt-code">
                <pre>&lt;form id="patient-form"&gt;
    &lt;input type="text" name="fullName" placeholder="Full Name" required&gt;
    &lt;input type="email" name="email" placeholder="Email" required&gt;
    &lt;input type="tel" name="phone" placeholder="Phone" required&gt;
    &lt;input type="date" name="dateOfBirth" required&gt;
    &lt;select name="gender" required&gt;
        &lt;option value=""&gt;Select Gender&lt;/option&gt;
        &lt;option value="male"&gt;Male&lt;/option&gt;
        &lt;option value="female"&gt;Female&lt;/option&gt;
    &lt;/select&gt;
    &lt;button type="submit"&gt;Submit Screening&lt;/button&gt;
&lt;/form&gt;

&lt;script&gt;
document.getElementById('patient-form').addEventListener('submit', async (e) =&gt; {
    e.preventDefault();
    
    const formData = new FormData(e.target);
    const data = Object.fromEntries(formData.entries());
    
    // Add metadata
    data.timestamp = new Date().toISOString();
    data.formVersion = '1.0';
    data.screeningCategory = 'custom';
    
    try {
        const response = await fetch('https://locumtele.app.n8n.cloud/webhook/patient-screener', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(data)
        });
        
        if (response.ok) {
            alert('Screening submitted successfully!');
            e.target.reset();
        } else {
            throw new Error('Submission failed');
        }
    } catch (error) {
        console.error('Error:', error);
        alert('There was an error submitting your screening. Please try again.');
    }
});
&lt;/script&gt;</pre>
            </div>
        </div>

        <div class="lt-api-section">
            <h2>WordPress/Gravity Forms</h2>
            <p>Integration with WordPress and Gravity Forms:</p>
            
            <div class="lt-code">
                <pre>// Add to your theme's functions.php
add_action('gform_after_submission', 'send_to_locumtele_api', 10, 2);

function send_to_locumtele_api($entry, $form) {
    // Only process specific forms
    if ($form['id'] != 1) return; // Replace with your form ID
    
    $data = array(
        'fullName' => rgar($entry, '1.3') . ' ' . rgar($entry, '1.6'), // First + Last name
        'email' => rgar($entry, '2'),
        'phone' => rgar($entry, '3'),
        'dateOfBirth' => rgar($entry, '4'),
        'gender' => rgar($entry, '5'),
        'timestamp' => current_time('c'),
        'formVersion' => '1.0',
        'screeningCategory' => 'custom'
    );
    
    $response = wp_remote_post('https://locumtele.app.n8n.cloud/webhook/patient-screener', array(
        'headers' => array('Content-Type' => 'application/json'),
        'body' => json_encode($data),
        'timeout' => 30
    ));
    
    if (is_wp_error($response)) {
        error_log('LocumTele API Error: ' . $response->get_error_message());
    }
}</pre>
            </div>
        </div>

        <div class="lt-api-section">
            <h2>Typeform Integration</h2>
            <p>Using Typeform webhooks:</p>
            
            <div class="lt-code">
                <pre>// Webhook endpoint (Node.js/Express example)
app.post('/typeform-webhook', (req, res) =&gt; {
    const { form_response } = req.body;
    const answers = form_response.answers;
    
    // Map Typeform answers to our API format
    const data = {
        fullName: answers.find(a =&gt; a.field.ref === 'full_name')?.text || '',
        email: answers.find(a =&gt; a.field.ref === 'email')?.email || '',
        phone: answers.find(a =&gt; a.field.ref === 'phone')?.phone_number || '',
        dateOfBirth: answers.find(a =&gt; a.field.ref === 'date_of_birth')?.date || '',
        gender: answers.find(a =&gt; a.field.ref === 'gender')?.choice?.label || '',
        timestamp: new Date().toISOString(),
        formVersion: '1.0',
        screeningCategory: 'custom'
    };
    
    // Forward to LocumTele API
    fetch('https://locumtele.app.n8n.cloud/webhook/patient-screener', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
    }).then(response =&gt; {
        if (response.ok) {
            res.status(200).send('Success');
        } else {
            res.status(500).send('Error');
        }
    });
});</pre>
            </div>
        </div>

        <!-- API Reference Section -->
        <div class="lt-section-intro">
            <div class="lt-section-robot"></div>
            <div class="lt-section-content">
                <h2>üìã API Reference</h2>
                <p>Complete technical details about our API endpoints, data formats, and response codes.</p>
            </div>
        </div>

        <div class="lt-api-section">
            <h2>Endpoint</h2>
            <div class="lt-code">
                <pre>POST https://locumtele.app.n8n.cloud/webhook/patient-screener</pre>
            </div>
            
            <h3>Headers</h3>
            <table class="lt-field-table">
                <thead>
                    <tr>
                        <th>Header</th>
                        <th>Value</th>
                        <th>Required</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Content-Type</td>
                        <td>application/json</td>
                        <td class="required">Yes</td>
                    </tr>
                </tbody>
            </table>

            <h3>Request Body Fields</h3>
            <table class="lt-field-table">
                <thead>
                    <tr>
                        <th>Field</th>
                        <th>Type</th>
                        <th>Required</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>fullName</td>
                        <td>string</td>
                        <td class="required">Yes</td>
                        <td>Patient's full name</td>
                    </tr>
                    <tr>
                        <td>email</td>
                        <td>string</td>
                        <td class="required">Yes</td>
                        <td>Valid email address</td>
                    </tr>
                    <tr>
                        <td>phone</td>
                        <td>string</td>
                        <td class="required">Yes</td>
                        <td>Phone number (any format)</td>
                    </tr>
                    <tr>
                        <td>dateOfBirth</td>
                        <td>string</td>
                        <td class="required">Yes</td>
                        <td>Date in YYYY-MM-DD format</td>
                    </tr>
                    <tr>
                        <td>gender</td>
                        <td>string</td>
                        <td class="required">Yes</td>
                        <td>male, female, or other</td>
                    </tr>
                    <tr>
                        <td>timestamp</td>
                        <td>string</td>
                        <td class="optional">No</td>
                        <td>ISO 8601 timestamp (auto-generated if not provided)</td>
                    </tr>
                    <tr>
                        <td>formVersion</td>
                        <td>string</td>
                        <td class="optional">No</td>
                        <td>Version of your form (for tracking)</td>
                    </tr>
                    <tr>
                        <td>screeningCategory</td>
                        <td>string</td>
                        <td class="optional">No</td>
                        <td>Category of screening (e.g., 'custom', 'weight-loss')</td>
                    </tr>
                </tbody>
            </table>

            <h3>Response Codes</h3>
            <table class="lt-field-table">
                <thead>
                    <tr>
                        <th>Code</th>
                        <th>Status</th>
                        <th>Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>200</td>
                        <td>Success</td>
                        <td>Data processed successfully</td>
                    </tr>
                    <tr>
                        <td>400</td>
                        <td>Bad Request</td>
                        <td>Invalid data format or missing required fields</td>
                    </tr>
                    <tr>
                        <td>500</td>
                        <td>Internal Server Error</td>
                        <td>Server error, please retry</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Testing Section -->
        <div class="lt-section-intro">
            <div class="lt-section-robot"></div>
            <div class="lt-section-content">
                <h2>üß™ Testing Your Integration</h2>
                <p>Use our testing tools to verify your integration works correctly before going live.</p>
            </div>
        </div>

        <div class="lt-api-section">
            <h2>Test Data</h2>
            <p>Use this sample data to test your integration:</p>
            
            <div class="lt-code">
                <pre>{
    "fullName": "John Doe",
    "email": "john.doe@example.com",
    "phone": "+1-555-123-4567",
    "dateOfBirth": "1990-01-15",
    "gender": "male",
    "timestamp": "2024-01-15T10:30:00Z",
    "formVersion": "1.0",
    "screeningCategory": "test"
}</pre>
            </div>

            <h3>cURL Test</h3>
            <div class="lt-code">
                <pre>curl -X POST https://locumtele.app.n8n.cloud/webhook/patient-screener \
  -H "Content-Type: application/json" \
  -d '{
    "fullName": "John Doe",
    "email": "john.doe@example.com",
    "phone": "+1-555-123-4567",
    "dateOfBirth": "1990-01-15",
    "gender": "male",
    "timestamp": "2024-01-15T10:30:00Z",
    "formVersion": "1.0",
    "screeningCategory": "test"
  }'</pre>
            </div>
        </div>

        <!-- Support Section -->
        <div class="lt-section-intro">
            <div class="lt-section-robot"></div>
            <div class="lt-section-content">
                <h2>üÜò Need Help?</h2>
                <p>Our team is here to help you integrate successfully. Reach out if you need assistance or have questions.</p>
            </div>
        </div>

        <div class="lt-api-section">
            <h2>Support Resources</h2>
            <div class="lt-grid lt-grid-2">
                <div class="lt-card">
                    <div class="lt-card-header">
                        <h3 class="lt-card-title">üìß Contact Support</h3>
                        <p class="lt-card-subtitle">Get help with your integration</p>
                    </div>
                    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-top: 1rem;">
                        <a href="mailto:support@locumtele.org" class="lt-btn lt-btn-primary">Email Support</a>
                    </div>
                </div>
                
                <div class="lt-card">
                    <div class="lt-card-header">
                        <h3 class="lt-card-title">üîó Back to Portal</h3>
                        <p class="lt-card-subtitle">Return to the main client portal</p>
                    </div>
                    <div style="display: flex; gap: 0.5rem; flex-wrap: wrap; margin-top: 1rem;">
                        <a href="client-portal.html" class="lt-btn lt-btn-outline">Client Portal</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="lt-footer">
        <div class="lt-footer-content">
            <div class="lt-footer-brand">
                <div class="lt-footer-logo">
                    <div style="width: 20px; height: 20px; background: linear-gradient(45deg, #34C759 25%, #007AFF 25%, #007AFF 50%, #34C759 50%, #34C759 75%, #007AFF 75%); border-radius: 3px;"></div>
                </div>
                <span>LocumTele.org</span>
            </div>
            <div class="lt-footer-links">
                <a href="client-portal.html" class="lt-footer-link">Client Portal</a>
                <a href="forms/documentation/QUICK_START.md" class="lt-footer-link">Quick Start</a>
                <a href="https://github.com/Locumtele/widgets" class="lt-footer-link">GitHub</a>
            </div>
            <p>Built with ‚ù§Ô∏è for healthcare providers</p>
        </div>
    </footer>
</body>
</html>
